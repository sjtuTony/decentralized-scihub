name: Pin SCI doc to Crust
on:
  pull_request:
    paths:
      - 'papers/**'
    branchs:
      - main

jobs:
  file_info:
    runs-on: ubuntu-latest
    outputs:
      cid: ${{ steps.get_file_info.outputs.cid }}
      cidLength: ${{ steps.get_file_info.outputs.cidLength }}
      size: ${{ steps.get_file_info.outputs.size }}
    steps:
      - uses: actions/checkout@v1
      - id: get_file_info
        run: |
          chmod +x ".github/etc/check.sh"
          ./.github/etc/check.sh "$(git diff --name-only --diff-filter=ACM ${{ github.event.pull_request.base.sha }} ${{ github.sha }} | xargs)"
          if [ $? -ne 0 ]; then
              exit 1
          fi
